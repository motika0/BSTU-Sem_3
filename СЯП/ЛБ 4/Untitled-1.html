<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        //Zadankd 1
const products = new Set();

function addProduct(product) {
    products.add(product);
}

function removeProduct(product) {
    products.delete(product);
}

function hasProduct(product) {
    return products.has(product);
}

function getProductCount() {
    return products.size;
}

addProduct('Молоко');
addProduct('Хлеб');
console.log(hasProduct('Молоко')); // true
console.log(getProductCount()); // 2
removeProduct('Хлеб');
console.log(getProductCount()); // 1

//zadanka 2
const students = new Set();

function addStudent(student) {
    students.add(student);
}

function removeStudent(id) {
    students.forEach(student => {
        if (student.id === id) {
            students.delete(student);
        }
    });
}

function filterStudents(group) {
    return Array.from(students).filter(student => student.group === group);
}

function sortStudent() {
    return Array.from(students).sort((a, b) => a.id - b.id);
}

addStudent({ id: 123, group: 'A', name: 'Иванов И.И.' });
addStudent({ id: 124, group: 'B', name: 'Петров П.П.' });
console.log(filterStudents('A'));
console.log(sortStudent());
removeStudent(123);
console.log(students.size);

//zadanka 3
const cart = new Map();

function addItem(id, name, quantity, price) {
    cart.set(id, { name, quantity, price });
}

function removeItemById(id) {
    cart.delete(id);
}

function removeItemsByName(name) {
    for (let [id, item] of cart.entries()) {
        if (item.name === name) {
            cart.delete(id);
        }
    }
}

function updateQuantity(id, quantity) {
    if (cart.has(id)) {
        const item = cart.get(id);
        item.quantity = quantity;
    }
}

function updatePrice(id, price) {
    if (cart.has(id)) {
        const item = cart.get(id);
        item.price = price;
    }
}

function getCartSummary() {
    let totalItems = 0;
    let totalPrice = 0;

    for (let item of cart.values()) {
        totalItems += item.quantity;
        totalPrice += item.quantity * item.price;
    }

    return { totalItems, totalPrice };
}

addItem(1, 'Молоко', 2, 50);
addItem(2, 'Хлеб', 1, 30);
console.log(getCartSummary()); 
updateQuantity(1, 3);
console.log(getCartSummary()); 
removeItemById(2);
console.log(getCartSummary()); 

//zadanka 4
const cache = new WeakMap();

function expensiveCalculation(param) {
    if (cache.has(param)) {
        return cache.get(param);
    }

    const result = param * 2;
    cache.set(param, result);
    return result;
}
const obj = {};
console.log(expensiveCalculation(obj)); 
console.log(expensiveCalculation(obj)); 
    </script>
</head>
<body>
    
</body>
</html>